# 持久化连接——Keep-Alive

针对HTTP1.0及其以下版本中每一次发送请求报文都需要建立一次TCP连接，经历三次握手、四次挥手这些阶段，而在HTTP1.1中，可以通过设置`Keep-Alive`来避免建立/释放连接所带来的开销。

## Keep-Alive头部

`Connection: Keep-Alive`头部在HTTP1.1之前存在，但在HTTP1.1中被废弃了，因为持久化连接变成了默认行为。(如要关闭需用`Connection：Close`)

>当然服务器不会一直保存长连接状态，它有一个具体的时间(自行设置)，超过这个时间就会断开。

如果开起了长连接，那么在客户端连续发送请求时，一些请求就可能会复用之前的TCP连接通道，而不是去新建一个TCP连接。

## 提问

1. **与服务器建立的连接是否会在一个HTTP请求后断开？什么情况下断开？**
   在`HTTP1.1`及其以上时，其不会在一个HTTP请求后断开，它会默认开起持久化连接，复用TCP连接通道。而在`HTTP1.0`中，默认情况下会在一个HTTP请求后断开连接，但是可以设置`Connection: Keep-Alive`来告知服务器进行长连接。当然在`HTTP1.1`之，如果长时间未请求服务器，服务器会主动断开长连接或主动在报文中声明`Connection: Close`来关闭长连接

2. **为什么有的时候刷新页面不需要重新建立 SSL 连接？**
   这个问题也是长连接的问题，在长连接情况下TCP连接不需要重新建立，SSL会复用之前的。
